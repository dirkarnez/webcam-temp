{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///index.js","webpack:///webpack/bootstrap a4e6359a2106721ac821","webpack:///./src/demo/AppSimpleVanillaJs.js","webpack:///./src/demo/index.js","webpack:///./src/lib/CameraPhoto/CameraPhoto.js","webpack:///./src/lib/CameraPhoto/MediaServices/MediaServices.js","webpack:///./src/lib/CameraPhoto/MediaServices/constants.js","webpack:///./src/lib/CameraPhoto/MediaServices/helper.js","webpack:///./src/lib/CameraPhoto/MediaServices/index.js","webpack:///./src/lib/CameraPhoto/constants.js","webpack:///./src/lib/CameraPhoto/index.js","webpack:///./src/lib/index.js","webpack:///./src/lib/plugins/downloadPhoto.js","webpack:///./src/lib/plugins/index.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","a","i","this","modules","installedModules","__webpack_require__","moduleId","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","./src/demo/AppSimpleVanillaJs.js","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__lib__","__WEBPACK_IMPORTED_MODULE_1__styles_css__","__WEBPACK_IMPORTED_MODULE_1__styles_css___default","videoElement","document","getElementById","imgElement","facingModeSelectElement","startCameraDefaultAllButtonElement","startDefaultResolutionButtonElement","startMaxResolutionButtonElement","takePhotoButtonElement","takePhotoAndDownloadButtonElement","stopCameraButtonElement","cameraSettingElement","showSwitchCamerasButtonsElement","showDebugPlatformInfoButtonElement","cameraPhoto","CameraPhoto","startCameraDefaultAll","startCamera","then","log","console","catch","error","startCameraDefaultResolution","facingMode","value","FACING_MODES","takePhoto","sizeFactor","imageType","IMAGE_TYPES","JPG","imageCompression","config","dataUri","getDataUri","src","takePhotoAndDownload","downloadPhoto","showCameraSettings","settings","getCameraSettings","innerHTML","aspectRatio","frameRate","height","width","showSwitchCameraButtons","enumerateCameras","cameras","length","cameraButtonsContainer","h3Element","createElement","innerText","appendChild","forEach","camera","kind","label","deviceId","buttonElement","addEventListener","startCameraIdMaxResolution","stopCamera","startCameraMaxResolution","showDebugPlatformInfo","debugPlatformInfoElement","JSON","stringify","_getDebugPlatformInfo","setInterval","onclick","./src/demo/index.js","__WEBPACK_IMPORTED_MODULE_0__AppSimpleVanillaJs__","./src/demo/styles.css","./src/lib/CameraPhoto/CameraPhoto.js","__WEBPACK_IMPORTED_MODULE_0__MediaServices__","__WEBPACK_IMPORTED_MODULE_1__constants__","_createClass","defineProperties","target","props","descriptor","writable","key","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","DEFAULT_IMAGE_TYPE","MediaServices","PNG","stream","numberOfMaxResolutionTry","windowURL","getWindowURL","mediaDevices","getNavigatorMediaDevices","_getStreamDevice","idealCameraDevice","idealResolution","_this","Promise","resolve","reject","constraints","getIdealConstraints","getUserMedia","_gotStream","_getStreamDeviceMaxResolution","_this2","getMaxResolutionConstraints","setTimeout","_setVideoSrc","srcObject","videoSrc","createObjectURL","_setSettings","tracks","getTracks","getSettings","_enumerateCamerasPromise","_this3","enumerateDevices","devices","device","push","err","_this4","video","track","stop","_this5","_this6","arguments","undefined","userConfig","DEFAULT_SIZE_FACTOR","DEFAULT_IMAGE_COMPRESSION","isImageMirror","DEFAULT_IMAGE_MIRROR","_this7","Error","./src/lib/CameraPhoto/MediaServices/MediaServices.js","__WEBPACK_IMPORTED_MODULE_0__helper__","videoWidth","videoHeight","_getImageSize","getImageSize","imageWidth","imageHeight","canvas","context","getContext","setTransform","drawImage","window","URL","webkitURL","mozURL","msURL","NMDevice","isNewAPI","navigator","isOldAPI","mozGetUserMedia","webkitGetUserMedia","NMDeviceOld","polyfillGetUserMedia","constraint","assign","isSupportedFacingMode","getSupportedConstraints","hasConstraints","NO_CONSTRAINTS","supConstraints","isFacingMode","SUPPORTED_FACING_MODES","includes","exact","audio","warn","VIDEO_ADVANCED_CONSTRANTS","min","stdConstraints","getIsIOS","iPhoneConstraints","ideal","advanced","slice","./src/lib/CameraPhoto/MediaServices/constants.js","SUPPORTED_IMAGE_TYPES","FORMAT_TYPES","_FORMAT_TYPES","_defineProperty","obj","USER","ENVIRONMENT","./src/lib/CameraPhoto/MediaServices/helper.js","__WEBPACK_IMPORTED_MODULE_0__constants__","_validateImgParam","join","_getValidImgParam","imgParam","e","_getStringWithPlatform","platform","userAgent","_getHasTouchEvents","parseFloat","ratio","toDataURL","stringWithPlatform","test","hasTouchEvents","./src/lib/CameraPhoto/MediaServices/index.js","__WEBPACK_IMPORTED_MODULE_1__helper__","./src/lib/CameraPhoto/constants.js","./src/lib/CameraPhoto/index.js","__WEBPACK_IMPORTED_MODULE_1__CameraPhoto__","./src/lib/index.js","__WEBPACK_IMPORTED_MODULE_0__CameraPhoto__","__WEBPACK_IMPORTED_MODULE_1__plugins__","./src/lib/plugins/downloadPhoto.js","_dataURItoBlob","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","blob","Blob","type","_padWithZeroNumber","number","Array","_getFileExtention","blobType","extention","_getFileName","prefixName","imageNumber","photoNumber","_downloadImageFileFomBlob","anchor","download","href","mouseEvent","createEvent","initMouseEvent","dispatchEvent","./src/lib/plugins/index.js","__WEBPACK_IMPORTED_MODULE_0__downloadPhoto__","0"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./src/demo/AppSimpleVanillaJs.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib__ = __webpack_require__(\"./src/lib/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__styles_css__ = __webpack_require__(\"./src/demo/styles.css\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__styles_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__styles_css__);\n// get video and image elements\nvar videoElement=document.getElementById('videoId');var imgElement=document.getElementById('imgId');// get select and buttons elements\nvar facingModeSelectElement=document.getElementById('facingModeSelectId');var startCameraDefaultAllButtonElement=document.getElementById('startDefaultAllButtonId');var startDefaultResolutionButtonElement=document.getElementById('startDefaultResolutionButtonId');var startMaxResolutionButtonElement=document.getElementById('startMaxResolutionId');var takePhotoButtonElement=document.getElementById('takePhotoButtonId');var takePhotoAndDownloadButtonElement=document.getElementById('takePhotoAndDownloadButtonId');var stopCameraButtonElement=document.getElementById('stopCameraButtonId');var cameraSettingElement=document.getElementById('cameraSettingsId');var showSwitchCamerasButtonsElement=document.getElementById('showSwitchCameraButtonsId');var showDebugPlatformInfoButtonElement=document.getElementById('showDebugPlatformInfoButtonId');// instantiate CameraPhoto with the videoElement\nvar cameraPhoto=new __WEBPACK_IMPORTED_MODULE_0__lib__[\"d\" /* default */](videoElement);function startCameraDefaultAll(){cameraPhoto.startCamera().then(function(){var log='Camera started with default All';console.log(log);}).catch(function(error){console.error('Camera not started!',error);});}// start the camera with prefered environment facingMode ie. ()\n// if the environment facingMode is not avalible, it will fallback\n// to the default camera avalible.\nfunction startCameraDefaultResolution(){var facingMode=facingModeSelectElement.value;cameraPhoto.startCamera(__WEBPACK_IMPORTED_MODULE_0__lib__[\"a\" /* FACING_MODES */][facingMode]).then(function(){var log='Camera started with default resolution and '+('prefered facingMode : '+facingMode);console.log(log);}).catch(function(error){console.error('Camera not started!',error);});}// function called by the buttons.\nfunction takePhoto(){var sizeFactor=1;var imageType=__WEBPACK_IMPORTED_MODULE_0__lib__[\"b\" /* IMAGE_TYPES */].JPG;var imageCompression=1;var config={sizeFactor:sizeFactor,imageType:imageType,imageCompression:imageCompression};var dataUri=cameraPhoto.getDataUri(config);imgElement.src=dataUri;}function takePhotoAndDownload(){var sizeFactor=1;var imageType=__WEBPACK_IMPORTED_MODULE_0__lib__[\"b\" /* IMAGE_TYPES */].JPG;var imageCompression=1;var config={sizeFactor:sizeFactor,imageType:imageType,imageCompression:imageCompression};var dataUri=cameraPhoto.getDataUri(config);Object(__WEBPACK_IMPORTED_MODULE_0__lib__[\"e\" /* downloadPhoto */])(dataUri,'myPhoto',1);imgElement.src=dataUri;}function showCameraSettings(){var settings=cameraPhoto.getCameraSettings();// by default is no camera...\nvar innerHTML='No active camera';if(settings){var aspectRatio=settings.aspectRatio,frameRate=settings.frameRate,height=settings.height,width=settings.width;innerHTML='\\n        <b>Current active camera:</b>\\n        aspectRatio:'+aspectRatio+'\\n        frameRate: '+frameRate+'\\n        height: '+height+'\\n        width: '+width+'\\n    ';}cameraSettingElement.innerHTML=innerHTML;}function showSwitchCameraButtons(){cameraPhoto.enumerateCameras().then(function(cameras){if(cameras&&cameras.length>0){var cameraButtonsContainer=document.getElementById('cameraButtonsContainerId');cameraButtonsContainer.innerHTML='';var h3Element=document.createElement('h3');h3Element.innerText='Choose your camera :';cameraButtonsContainer.appendChild(h3Element);cameras.forEach(function(camera){var kind=camera.kind,label=camera.label,deviceId=camera.deviceId;var buttonElement=document.createElement('button');buttonElement.innerHTML='\\n            kind: '+kind+' <br/>\\n            label: '+label+' <br/>\\n            deviceId: '+deviceId+'\\n          ';(function(deviceId){buttonElement.addEventListener('click',function(){console.log('click on',deviceId);startCameraIdMaxResolution(deviceId);});})(deviceId);cameraButtonsContainer.appendChild(buttonElement);});}}).catch(function(error){console.log('Error could not enumerateCameras:',error);});}function stopCamera(){cameraPhoto.stopCamera().then(function(){console.log('Camera stoped!');}).catch(function(error){console.log('No camera to stop!:',error);});}function startCameraIdMaxResolution(deviceId){cameraPhoto.startCameraMaxResolution(deviceId).then(function(){var log='Camera started with maximum resoluton and '+('prefered deviceId: '+deviceId+' ');console.log(log);}).catch(function(error){console.error('Camera not started!',error);});}function startCameraMaxResolution(){var facingMode=facingModeSelectElement.value;cameraPhoto.startCameraMaxResolution(__WEBPACK_IMPORTED_MODULE_0__lib__[\"a\" /* FACING_MODES */][facingMode]).then(function(){var log='Camera started with maximum resoluton and '+('prefered facingMode: '+facingMode+' ');console.log(log);}).catch(function(error){console.error('Camera not started!',error);});}function showDebugPlatformInfo(){var debugPlatformInfoElement=document.getElementById('debugPlatformInfoId');debugPlatformInfoElement.innerHTML=JSON.stringify(Object(__WEBPACK_IMPORTED_MODULE_0__lib__[\"c\" /* _getDebugPlatformInfo */])(),null,2);}document.addEventListener('DOMContentLoaded',function(){// update camera setting\nsetInterval(function(){showCameraSettings();},500);// bind the buttons to the right functions.\nstartCameraDefaultAllButtonElement.onclick=startCameraDefaultAll;startDefaultResolutionButtonElement.onclick=startCameraDefaultResolution;startMaxResolutionButtonElement.onclick=startCameraMaxResolution;takePhotoButtonElement.onclick=takePhoto;takePhotoAndDownloadButtonElement.onclick=takePhotoAndDownload;stopCameraButtonElement.onclick=stopCamera;showSwitchCamerasButtonsElement.onclick=showSwitchCameraButtons;showDebugPlatformInfoButtonElement.onclick=showDebugPlatformInfo;});\n\n/***/ }),\n\n/***/ \"./src/demo/index.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__AppSimpleVanillaJs__ = __webpack_require__(\"./src/demo/AppSimpleVanillaJs.js\");\n\n\n/***/ }),\n\n/***/ \"./src/demo/styles.css\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"./src/lib/CameraPhoto/CameraPhoto.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CameraPhoto; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__MediaServices__ = __webpack_require__(\"./src/lib/CameraPhoto/MediaServices/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants__ = __webpack_require__(\"./src/lib/CameraPhoto/constants.js\");\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var DEFAULT_IMAGE_TYPE=__WEBPACK_IMPORTED_MODULE_0__MediaServices__[\"a\" /* MediaServices */].IMAGE_TYPES.PNG;var CameraPhoto=function(){function CameraPhoto(videoElement){_classCallCheck(this,CameraPhoto);this.videoElement=videoElement;this.stream=null;this.numberOfMaxResolutionTry=0;this.settings=null;this.cameras=[];// Set the right object depending on the browser.\nthis.windowURL=__WEBPACK_IMPORTED_MODULE_0__MediaServices__[\"a\" /* MediaServices */].getWindowURL();this.mediaDevices=__WEBPACK_IMPORTED_MODULE_0__MediaServices__[\"a\" /* MediaServices */].getNavigatorMediaDevices();}_createClass(CameraPhoto,[{key:'_getStreamDevice',value:function _getStreamDevice(idealCameraDevice,idealResolution){var _this=this;return new Promise(function(resolve,reject){var constraints=__WEBPACK_IMPORTED_MODULE_0__MediaServices__[\"a\" /* MediaServices */].getIdealConstraints(idealCameraDevice,idealResolution);_this.mediaDevices.getUserMedia(constraints).then(function(stream){_this._gotStream(stream);resolve(stream);}).catch(function(error){reject(error);});});}},{key:'_getStreamDeviceMaxResolution',value:function _getStreamDeviceMaxResolution(idealCameraDevice){var _this2=this;var constraints=__WEBPACK_IMPORTED_MODULE_0__MediaServices__[\"a\" /* MediaServices */].getMaxResolutionConstraints(idealCameraDevice,this.numberOfMaxResolutionTry);// all the trying is done...\nif(constraints==null){var idealResolution={};return this._getStreamDevice(idealCameraDevice,idealResolution);}return new Promise(function(resolve,reject){_this2.mediaDevices.getUserMedia(constraints).then(function(stream){_this2._gotStream(stream);resolve(stream);}).catch(function(error){setTimeout(function(){_this2.numberOfMaxResolutionTry+=1;_this2._getStreamDeviceMaxResolution(idealCameraDevice).catch(function(){reject(error);});},20);});});}},{key:'_setVideoSrc',value:function _setVideoSrc(stream){if('srcObject'in this.videoElement){this.videoElement.srcObject=stream;}else{// using URL.createObjectURL() as fallback for old browsers\nvar videoSrc=this.windowURL.createObjectURL(stream);this.videoElement.src=videoSrc;}}},{key:'_setSettings',value:function _setSettings(stream){// default setting is null\nthis.settings=null;var tracks=stream&&stream.getTracks?stream.getTracks():[];if(tracks.length>0&&tracks[0].getSettings){this.settings=tracks[0].getSettings();}}},{key:'_enumerateCamerasPromise',value:function _enumerateCamerasPromise(){var _this3=this;return new Promise(function(resolve,reject){// only make shure the camera is sarted\nvar cameras=[];_this3.mediaDevices.enumerateDevices().then(function(devices){devices.forEach(function(device){if(device.kind==='videoinput'&&device.deviceId){cameras.push(device);}});resolve(cameras);}).catch(function(err){reject(err);});});}},{key:'_gotStream',value:function _gotStream(stream){this.stream=stream;this._setSettings(stream);this._setVideoSrc(stream);}},{key:'getCameraSettings',value:function getCameraSettings(){return this.settings;}},{key:'enumerateCameras',value:function enumerateCameras(){var _this4=this;// If the camera is already started, return only the promise.\nif(this.stream){return this._enumerateCamerasPromise();}// We don't know if the camera is granted so we need to start\n// and stop the camera and then return the promise.\nreturn this.stopCamera().then(function(){}).catch(function(){}).then(function(){var constraints={video:true};return _this4.mediaDevices.getUserMedia(constraints).then(function(stream){// Wait 20 ms before stop the camera.\nsetTimeout(function(){stream.getTracks().forEach(function(track){track.stop();});},20);}).then(function(){}).catch(function(){}).then(function(){return _this4._enumerateCamerasPromise();});});}},{key:'startCamera',value:function startCamera(idealCameraDevice,idealResolution){var _this5=this;// stop the stream before playing it.\nreturn this.stopCamera().then(function(){}).catch(function(){})// Always called (when the promise is done)\n.then(function(){return _this5._getStreamDevice(idealCameraDevice,idealResolution);});}},{key:'startCameraMaxResolution',value:function startCameraMaxResolution(){var _this6=this;var idealCameraDevice=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';this.numberOfMaxResolutionTry=0;// stop the stream before playing it.\nreturn this.stopCamera().then(function(){}).catch(function(){})// Always called (when the promise is done)\n.then(function(){return _this6._getStreamDeviceMaxResolution(idealCameraDevice);});}},{key:'getDataUri',value:function getDataUri(userConfig){var config={sizeFactor:userConfig.sizeFactor===undefined?__WEBPACK_IMPORTED_MODULE_1__constants__[\"c\" /* DEFAULT_SIZE_FACTOR */]:userConfig.sizeFactor,imageType:userConfig.imageType===undefined?DEFAULT_IMAGE_TYPE:userConfig.imageType,imageCompression:userConfig.imageCompression===undefined?__WEBPACK_IMPORTED_MODULE_1__constants__[\"a\" /* DEFAULT_IMAGE_COMPRESSION */]:userConfig.imageCompression,isImageMirror:userConfig.isImageMirror===undefined?__WEBPACK_IMPORTED_MODULE_1__constants__[\"b\" /* DEFAULT_IMAGE_MIRROR */]:userConfig.isImageMirror};var dataUri=__WEBPACK_IMPORTED_MODULE_0__MediaServices__[\"a\" /* MediaServices */].getDataUri(this.videoElement,config);return dataUri;}},{key:'stopCamera',value:function stopCamera(){var _this7=this;return new Promise(function(resolve,reject){if(_this7.stream){_this7.stream.getTracks().forEach(function(track){track.stop();});_this7.videoElement.src='';_this7.stream=null;_this7._setSettings(null);resolve();}reject(Error('no stream to stop!'));});}}]);return CameraPhoto;}();\n\n/***/ }),\n\n/***/ \"./src/lib/CameraPhoto/MediaServices/MediaServices.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MediaServices; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__helper__ = __webpack_require__(\"./src/lib/CameraPhoto/MediaServices/helper.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants__ = __webpack_require__(\"./src/lib/CameraPhoto/MediaServices/constants.js\");\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var MediaServices=function(){function MediaServices(){_classCallCheck(this,MediaServices);}_createClass(MediaServices,null,[{key:'getDataUri',value:function getDataUri(videoElement,config){var sizeFactor=config.sizeFactor,imageType=config.imageType,imageCompression=config.imageCompression,isImageMirror=config.isImageMirror;var videoWidth=videoElement.videoWidth,videoHeight=videoElement.videoHeight;var _getImageSize=Object(__WEBPACK_IMPORTED_MODULE_0__helper__[\"c\" /* getImageSize */])(videoWidth,videoHeight,sizeFactor),imageWidth=_getImageSize.imageWidth,imageHeight=_getImageSize.imageHeight;// Build the canvas size et draw the image to context from videoElement\nvar canvas=document.createElement('canvas');canvas.width=imageWidth;canvas.height=imageHeight;var context=canvas.getContext('2d');// Flip horizontally (as css transform: rotateY(180deg))\nif(isImageMirror){context.setTransform(-1,0,0,1,canvas.width,0);}context.drawImage(videoElement,0,0,imageWidth,imageHeight);// Get dataUri from canvas\nvar dataUri=Object(__WEBPACK_IMPORTED_MODULE_0__helper__[\"b\" /* getDataUri */])(canvas,imageType,imageCompression);return dataUri;}},{key:'getWindowURL',value:function getWindowURL(){var windowURL=window.URL||window.webkitURL||window.mozURL||window.msURL;return windowURL;}/*\r\n  Inspiration : https://github.com/jhuckaby/webcamjs/blob/master/webcam.js\r\n  */},{key:'getNavigatorMediaDevices',value:function getNavigatorMediaDevices(){var NMDevice=null;var isNewAPI=!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia);var isOldAPI=!!(navigator.mozGetUserMedia||navigator.webkitGetUserMedia);if(isNewAPI){NMDevice=navigator.mediaDevices;}else if(isOldAPI){var NMDeviceOld=navigator.mozGetUserMedia||navigator.webkitGetUserMedia;// Setup getUserMedia, with polyfill for older browsers\n// Adapted from: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\nvar polyfillGetUserMedia={getUserMedia:function getUserMedia(constraint){return new Promise(function(resolve,reject){NMDeviceOld.call(navigator,constraint,resolve,reject);});}};// Overwrite getUserMedia() with the polyfill\nNMDevice=Object.assign(NMDeviceOld,polyfillGetUserMedia);}// If is no navigator.mediaDevices || navigator.mozGetUserMedia || navigator.webkitGetUserMedia\n// then is not supported so return null\nreturn NMDevice;}// https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API/Constraints\n},{key:'isSupportedFacingMode',value:function isSupportedFacingMode(){// navigator.mediaDevices\nreturn MediaServices.getNavigatorMediaDevices().getSupportedConstraints().facingMode;}},{key:'getIdealConstraints',value:function getIdealConstraints(idealCameraDevice,idealResolution){if(!Object(__WEBPACK_IMPORTED_MODULE_0__helper__[\"e\" /* hasConstraints */])(idealCameraDevice,idealResolution)){return __WEBPACK_IMPORTED_MODULE_1__constants__[\"d\" /* NO_CONSTRAINTS */];}var supConstraints=MediaServices.getNavigatorMediaDevices().getSupportedConstraints();if(!supConstraints.width||!supConstraints.height){console.error('Constraint width or height not supported! fallback to default resolution');return __WEBPACK_IMPORTED_MODULE_1__constants__[\"d\" /* NO_CONSTRAINTS */];}var facingMode=void 0;var deviceId=void 0;if(idealCameraDevice){var isFacingMode=__WEBPACK_IMPORTED_MODULE_1__constants__[\"e\" /* SUPPORTED_FACING_MODES */].includes(idealCameraDevice);if(isFacingMode){facingMode=idealCameraDevice;}else{deviceId={exact:idealCameraDevice};}}var width=idealResolution&&idealResolution.width;var height=idealResolution&&idealResolution.height;return{audio:false,video:{facingMode:facingMode,deviceId:deviceId,width:width,height:height}};}},{key:'getMaxResolutionConstraints',value:function getMaxResolutionConstraints(){var idealCameraDevice=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var numberOfMaxResolutionTry=arguments[1];console.warn('getMaxResolutionConstraints() numberOfMaxResolutionTry:',numberOfMaxResolutionTry);var VIDEO_ADVANCED_CONSTRANTS=[{width:{min:640}},{width:{min:800}},{width:{min:900}},{width:{min:1024}},{width:{min:1080}},{width:{min:1280}},{width:{min:1920}},{width:{min:2560}},{width:{min:3840}},{width:{min:4096}},{width:{min:4640}},{width:{min:5120}},{width:{min:5760}},{width:{min:6400}},{width:{min:7680}}];var stdConstraints=MediaServices.getIdealConstraints(idealCameraDevice,{});if(numberOfMaxResolutionTry===0){if(Object(__WEBPACK_IMPORTED_MODULE_0__helper__[\"d\" /* getIsIOS */])()){console.warn('fallback to iOS constraints');// inspiration : https://www.w3.org/TR/mediacapture-streams/#example-3\nvar iPhoneConstraints=MediaServices.getIdealConstraints(idealCameraDevice,{width:{min:640,ideal:3840},height:{min:480,ideal:2160}});return iPhoneConstraints;}stdConstraints.video.advanced=VIDEO_ADVANCED_CONSTRANTS;return stdConstraints;}if(numberOfMaxResolutionTry<VIDEO_ADVANCED_CONSTRANTS.length){// Each number of try, we remove the last value of the array (the bigger minim width)\nvar advanced=VIDEO_ADVANCED_CONSTRANTS.slice(0,-numberOfMaxResolutionTry);stdConstraints.video.advanced=advanced;return stdConstraints;}// Fallback all the possibility has been tried. ie:.\n// numberOfMaxResolutionTry >= VIDEO_ADVANCED_CONSTRANTS.length\nreturn null;}},{key:'FACING_MODES',get:function get(){return __WEBPACK_IMPORTED_MODULE_1__constants__[\"a\" /* FACING_MODES */];}},{key:'IMAGE_TYPES',get:function get(){return __WEBPACK_IMPORTED_MODULE_1__constants__[\"c\" /* IMAGE_TYPES */];}}]);return MediaServices;}();\n\n/***/ }),\n\n/***/ \"./src/lib/CameraPhoto/MediaServices/constants.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return SUPPORTED_FACING_MODES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return FACING_MODES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return SUPPORTED_IMAGE_TYPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return IMAGE_TYPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return FORMAT_TYPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return NO_CONSTRAINTS; });\nvar _FORMAT_TYPES;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}// camera constants\nvar USER='user';var ENVIRONMENT='environment';var SUPPORTED_FACING_MODES=[USER,ENVIRONMENT];var FACING_MODES={'USER':USER,'ENVIRONMENT':ENVIRONMENT};// Image constants\nvar PNG='png';var JPG='jpg';var SUPPORTED_IMAGE_TYPES=[JPG,PNG];var IMAGE_TYPES={'PNG':PNG,'JPG':JPG};var FORMAT_TYPES=(_FORMAT_TYPES={},_defineProperty(_FORMAT_TYPES,JPG,'image/jpeg'),_defineProperty(_FORMAT_TYPES,PNG,'image/png'),_FORMAT_TYPES);var NO_CONSTRAINTS={audio:false,video:true};\n\n/***/ }),\n\n/***/ \"./src/lib/CameraPhoto/MediaServices/helper.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = getImageSize;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = getDataUri;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = hasConstraints;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = getIsIOS;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = _getDebugPlatformInfo;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constants__ = __webpack_require__(\"./src/lib/CameraPhoto/MediaServices/constants.js\");\nfunction _validateImgParam(imageType,imageCompression){// validate the imageCompression\nif(!(imageCompression>=0&&imageCompression<=1)){throw new Error(imageCompression+' is invalid imageCompression, choose between: [0, 1]');}// validate the imageType\nif(!__WEBPACK_IMPORTED_MODULE_0__constants__[\"f\" /* SUPPORTED_IMAGE_TYPES */].includes(imageType)){throw new Error(imageType+' is invalid imageType, choose between: '+__WEBPACK_IMPORTED_MODULE_0__constants__[\"f\" /* SUPPORTED_IMAGE_TYPES */].join(', '));}return true;}function _getValidImgParam(imageType,imageCompression){var imgParam={};try{_validateImgParam(imageType,imageCompression);imgParam.imageType=imageType;imgParam.imageCompression=imageCompression;}catch(e){console.error(e);console.error('default value of '+__WEBPACK_IMPORTED_MODULE_0__constants__[\"c\" /* IMAGE_TYPES */].PNG+' is used');imgParam.imageType=__WEBPACK_IMPORTED_MODULE_0__constants__[\"c\" /* IMAGE_TYPES */].PNG;imgParam.imageCompression=null;}return imgParam;}function _getStringWithPlatform(){// platform will be obsolete and will return empty string\nvar platform=window.navigator.platform;var userAgent=window.navigator.userAgent;return platform||userAgent;}function _getHasTouchEvents(){return'ontouchend'in document;}function getImageSize(videoWidth,videoHeight,sizeFactor){// calc the imageWidth\nvar imageWidth=videoWidth*parseFloat(sizeFactor);// calc the ratio\nvar ratio=videoWidth/imageWidth;// calc the imageHeight\nvar imageHeight=videoHeight/ratio;return{imageWidth:imageWidth,imageHeight:imageHeight};}function getDataUri(canvas,imageType,imageCompression){var imgParam=_getValidImgParam(imageType,imageCompression);if(imgParam.imageType===__WEBPACK_IMPORTED_MODULE_0__constants__[\"c\" /* IMAGE_TYPES */].JPG){if(!imageCompression){return canvas.toDataURL(__WEBPACK_IMPORTED_MODULE_0__constants__[\"b\" /* FORMAT_TYPES */][__WEBPACK_IMPORTED_MODULE_0__constants__[\"c\" /* IMAGE_TYPES */].JPG]);}return canvas.toDataURL(__WEBPACK_IMPORTED_MODULE_0__constants__[\"b\" /* FORMAT_TYPES */][__WEBPACK_IMPORTED_MODULE_0__constants__[\"c\" /* IMAGE_TYPES */].JPG],imageCompression);}return canvas.toDataURL(__WEBPACK_IMPORTED_MODULE_0__constants__[\"b\" /* FORMAT_TYPES */][imageType]);}function hasConstraints(idealCameraDevice,idealResolution){return idealCameraDevice||idealResolution;}// Inspiration: https://stackoverflow.com/questions/9038625/detect-if-device-is-ios\nfunction getIsIOS(){var stringWithPlatform=_getStringWithPlatform();if(/iPad|iPhone|iPod/.test(stringWithPlatform)){return true;}// The new iPad return MacIntel as platform and Macintosh as userAgent\n// so the way to differentiate iPad vs mac is by checking if\n// Touch Events exist on the document\nvar hasTouchEvents=_getHasTouchEvents();if(/Mac/.test(stringWithPlatform)&&hasTouchEvents){return true;}return false;}// TODO : return an object with all usefull info of the device for debugging purpose.\nfunction _getDebugPlatformInfo(){return{userAgent:window.navigator.userAgent,platform:window.navigator.platform,_getStringWithPlatform:_getStringWithPlatform(),_getHasTouchEvents:_getHasTouchEvents(),getIsIOS:getIsIOS()};}\n\n/***/ }),\n\n/***/ \"./src/lib/CameraPhoto/MediaServices/index.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__MediaServices__ = __webpack_require__(\"./src/lib/CameraPhoto/MediaServices/MediaServices.js\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__MediaServices__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__helper__ = __webpack_require__(\"./src/lib/CameraPhoto/MediaServices/helper.js\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_1__helper__[\"a\"]; });\n\n\n/***/ }),\n\n/***/ \"./src/lib/CameraPhoto/constants.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return DEFAULT_SIZE_FACTOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DEFAULT_IMAGE_COMPRESSION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return DEFAULT_IMAGE_MIRROR; });\nvar DEFAULT_SIZE_FACTOR=1;var DEFAULT_IMAGE_COMPRESSION=null;var DEFAULT_IMAGE_MIRROR=false;\n\n/***/ }),\n\n/***/ \"./src/lib/CameraPhoto/index.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return FACING_MODES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return IMAGE_TYPES; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__MediaServices__ = __webpack_require__(\"./src/lib/CameraPhoto/MediaServices/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__CameraPhoto__ = __webpack_require__(\"./src/lib/CameraPhoto/CameraPhoto.js\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_1__CameraPhoto__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return __WEBPACK_IMPORTED_MODULE_0__MediaServices__[\"b\"]; });\nvar FACING_MODES=__WEBPACK_IMPORTED_MODULE_0__MediaServices__[\"a\" /* MediaServices */].FACING_MODES;var IMAGE_TYPES=__WEBPACK_IMPORTED_MODULE_0__MediaServices__[\"a\" /* MediaServices */].IMAGE_TYPES;// For debugging only\n\n\n/***/ }),\n\n/***/ \"./src/lib/index.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__CameraPhoto__ = __webpack_require__(\"./src/lib/CameraPhoto/index.js\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__CameraPhoto__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_0__CameraPhoto__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_0__CameraPhoto__[\"d\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__plugins__ = __webpack_require__(\"./src/lib/plugins/index.js\");\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return __WEBPACK_IMPORTED_MODULE_1__plugins__[\"a\"]; });\n/* harmony default export */ __webpack_exports__[\"d\"] = (__WEBPACK_IMPORTED_MODULE_0__CameraPhoto__[\"a\" /* CameraPhoto */]);\n\n/***/ }),\n\n/***/ \"./src/lib/plugins/downloadPhoto.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = downloadPhoto;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__CameraPhoto__ = __webpack_require__(\"./src/lib/CameraPhoto/index.js\");\nfunction _dataURItoBlob(dataURI){var byteString=atob(dataURI.split(',')[1]);// separate out the mime component\nvar mimeString=dataURI.split(',')[0].split(':')[1].split(';')[0];var ab=new ArrayBuffer(byteString.length);var ia=new Uint8Array(ab);for(var i=0;i<byteString.length;i++){ia[i]=byteString.charCodeAt(i);}var blob=new Blob([ab],{type:mimeString});return blob;}function _padWithZeroNumber(number,width){number=number+'';return number.length>=width?number:new Array(width-number.length+1).join('0')+number;}function _getFileExtention(blobType){// by default the extention is .png\nvar extention=__WEBPACK_IMPORTED_MODULE_0__CameraPhoto__[\"c\" /* IMAGE_TYPES */].PNG;if(blobType==='image/jpeg'){extention=__WEBPACK_IMPORTED_MODULE_0__CameraPhoto__[\"c\" /* IMAGE_TYPES */].JPG;}return extention;}function _getFileName(prefixName,imageNumber,blobType){var photoNumber=_padWithZeroNumber(imageNumber,4);var extention=_getFileExtention(blobType);return prefixName+'-'+photoNumber+'.'+extention;}function _downloadImageFileFomBlob(blob,prefixName,imageNumber){window.URL=window.webkitURL||window.URL;var anchor=document.createElement('a');anchor.download=_getFileName(prefixName,imageNumber,blob.type);anchor.href=window.URL.createObjectURL(blob);var mouseEvent=document.createEvent('MouseEvents');mouseEvent.initMouseEvent('click',true,true,window,1,0,0,0,0,false,false,false,false,0,null);anchor.dispatchEvent(mouseEvent);}function downloadPhoto(dataUri){var prefixName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'photo';var imageNumber=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var blob=_dataURItoBlob(dataUri);_downloadImageFileFomBlob(blob,prefixName,imageNumber);}\n\n/***/ }),\n\n/***/ \"./src/lib/plugins/index.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__downloadPhoto__ = __webpack_require__(\"./src/lib/plugins/downloadPhoto.js\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__downloadPhoto__[\"a\"]; });\n\n\n/***/ }),\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"./src/demo/index.js\");\n\n\n/***/ })\n\n/******/ });\n});\n\n\n// WEBPACK FOOTER //\n// index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a4e6359a2106721ac821","import CameraPhoto, { FACING_MODES, IMAGE_TYPES, downloadPhoto, _getDebugPlatformInfo } from '../lib';\r\nimport './styles.css';\r\n\r\n// get video and image elements\r\nlet videoElement = document.getElementById('videoId');\r\nlet imgElement = document.getElementById('imgId');\r\n\r\n// get select and buttons elements\r\nlet facingModeSelectElement = document.getElementById('facingModeSelectId');\r\nlet startCameraDefaultAllButtonElement = document.getElementById(\r\n  'startDefaultAllButtonId'\r\n);\r\nlet startDefaultResolutionButtonElement = document.getElementById(\r\n  'startDefaultResolutionButtonId'\r\n);\r\nlet startMaxResolutionButtonElement = document.getElementById(\r\n  'startMaxResolutionId'\r\n);\r\nlet takePhotoButtonElement = document.getElementById('takePhotoButtonId');\r\nlet takePhotoAndDownloadButtonElement = document.getElementById('takePhotoAndDownloadButtonId');\r\nlet stopCameraButtonElement = document.getElementById('stopCameraButtonId');\r\nlet cameraSettingElement = document.getElementById('cameraSettingsId');\r\nlet showSwitchCamerasButtonsElement = document.getElementById(\r\n  'showSwitchCameraButtonsId'\r\n);\r\nlet showDebugPlatformInfoButtonElement = document.getElementById(\r\n  'showDebugPlatformInfoButtonId'\r\n);\r\n\r\n// instantiate CameraPhoto with the videoElement\r\nlet cameraPhoto = new CameraPhoto(videoElement);\r\n\r\nfunction startCameraDefaultAll () {\r\n  cameraPhoto.startCamera()\r\n    .then(() => {\r\n      let log = `Camera started with default All`;\r\n      console.log(log);\r\n    })\r\n    .catch((error) => {\r\n      console.error('Camera not started!', error);\r\n    });\r\n}\r\n\r\n// start the camera with prefered environment facingMode ie. ()\r\n// if the environment facingMode is not avalible, it will fallback\r\n// to the default camera avalible.\r\nfunction startCameraDefaultResolution () {\r\n  let facingMode = facingModeSelectElement.value;\r\n  cameraPhoto.startCamera(FACING_MODES[facingMode])\r\n    .then(() => {\r\n      let log =\r\n        `Camera started with default resolution and ` +\r\n        `prefered facingMode : ${facingMode}`;\r\n      console.log(log);\r\n    })\r\n    .catch((error) => {\r\n      console.error('Camera not started!', error);\r\n    });\r\n}\r\n\r\n// function called by the buttons.\r\nfunction takePhoto () {\r\n  let sizeFactor = 1;\r\n  let imageType = IMAGE_TYPES.JPG;\r\n  let imageCompression = 1;\r\n\r\n  let config = {\r\n    sizeFactor,\r\n    imageType,\r\n    imageCompression\r\n  };\r\n\r\n  let dataUri = cameraPhoto.getDataUri(config);\r\n  imgElement.src = dataUri;\r\n}\r\n\r\nfunction takePhotoAndDownload () {\r\n  let sizeFactor = 1;\r\n  let imageType = IMAGE_TYPES.JPG;\r\n  let imageCompression = 1;\r\n\r\n  let config = {\r\n    sizeFactor,\r\n    imageType,\r\n    imageCompression\r\n  };\r\n\r\n  let dataUri = cameraPhoto.getDataUri(config);\r\n  downloadPhoto(dataUri, 'myPhoto', 1);\r\n  imgElement.src = dataUri;\r\n}\r\n\r\nfunction showCameraSettings () {\r\n  let settings = cameraPhoto.getCameraSettings();\r\n\r\n  // by default is no camera...\r\n  let innerHTML = 'No active camera';\r\n  if (settings) {\r\n    let { aspectRatio, frameRate, height, width } = settings;\r\n    innerHTML = `\r\n        <b>Current active camera:</b>\r\n        aspectRatio:${aspectRatio}\r\n        frameRate: ${frameRate}\r\n        height: ${height}\r\n        width: ${width}\r\n    `;\r\n  }\r\n  cameraSettingElement.innerHTML = innerHTML;\r\n}\r\n\r\nfunction showSwitchCameraButtons () {\r\n  cameraPhoto.enumerateCameras().then((cameras) => {\r\n    if (cameras && cameras.length > 0) {\r\n      let cameraButtonsContainer = document.getElementById('cameraButtonsContainerId');\r\n      cameraButtonsContainer.innerHTML = '';\r\n\r\n      let h3Element = document.createElement('h3');\r\n      h3Element.innerText = 'Choose your camera :';\r\n      cameraButtonsContainer.appendChild(h3Element);\r\n\r\n      cameras.forEach((camera) => {\r\n        let { kind, label, deviceId } = camera;\r\n        const buttonElement = document.createElement('button');\r\n        buttonElement.innerHTML = `\r\n            kind: ${kind} <br/>\r\n            label: ${label} <br/>\r\n            deviceId: ${deviceId}\r\n          `;\r\n        (function (deviceId) {\r\n          buttonElement.addEventListener('click', function () {\r\n            console.log('click on', deviceId);\r\n            startCameraIdMaxResolution(deviceId);\r\n          });\r\n        })(deviceId);\r\n        cameraButtonsContainer.appendChild(buttonElement);\r\n      });\r\n    }\r\n  }).catch((error) => {\r\n    console.log('Error could not enumerateCameras:', error);\r\n  });\r\n}\r\n\r\nfunction stopCamera () {\r\n  cameraPhoto.stopCamera()\r\n    .then(() => {\r\n      console.log('Camera stoped!');\r\n    })\r\n    .catch((error) => {\r\n      console.log('No camera to stop!:', error);\r\n    });\r\n}\r\n\r\nfunction startCameraIdMaxResolution (deviceId) {\r\n  cameraPhoto.startCameraMaxResolution(deviceId)\r\n    .then(() => {\r\n      let log =\r\n        `Camera started with maximum resoluton and ` +\r\n        `prefered deviceId: ${deviceId} `;\r\n      console.log(log);\r\n    })\r\n    .catch((error) => {\r\n      console.error('Camera not started!', error);\r\n    });\r\n}\r\n\r\nfunction startCameraMaxResolution () {\r\n  let facingMode = facingModeSelectElement.value;\r\n  cameraPhoto.startCameraMaxResolution(FACING_MODES[facingMode])\r\n    .then(() => {\r\n      let log =\r\n        `Camera started with maximum resoluton and ` +\r\n        `prefered facingMode: ${facingMode} `;\r\n      console.log(log);\r\n    })\r\n    .catch((error) => {\r\n      console.error('Camera not started!', error);\r\n    });\r\n}\r\n\r\nfunction showDebugPlatformInfo () {\r\n  let debugPlatformInfoElement = document.getElementById('debugPlatformInfoId');\r\n  debugPlatformInfoElement.innerHTML = JSON.stringify(_getDebugPlatformInfo(), null, 2);\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n  // update camera setting\r\n  setInterval(() => {\r\n    showCameraSettings();\r\n  }, 500);\r\n\r\n  // bind the buttons to the right functions.\r\n  startCameraDefaultAllButtonElement.onclick = startCameraDefaultAll;\r\n  startDefaultResolutionButtonElement.onclick = startCameraDefaultResolution;\r\n  startMaxResolutionButtonElement.onclick = startCameraMaxResolution;\r\n  takePhotoButtonElement.onclick = takePhoto;\r\n  takePhotoAndDownloadButtonElement.onclick = takePhotoAndDownload;\r\n  stopCameraButtonElement.onclick = stopCamera;\r\n  showSwitchCamerasButtonsElement.onclick = showSwitchCameraButtons;\r\n  showDebugPlatformInfoButtonElement.onclick = showDebugPlatformInfo;\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demo/AppSimpleVanillaJs.js","import './AppSimpleVanillaJs';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demo/index.js","import { MediaServices } from './MediaServices';\r\n\r\nimport {\r\n  DEFAULT_SIZE_FACTOR,\r\n  DEFAULT_IMAGE_COMPRESSION,\r\n  DEFAULT_IMAGE_MIRROR\r\n} from './constants';\r\n\r\nconst DEFAULT_IMAGE_TYPE = MediaServices.IMAGE_TYPES.PNG;\r\n\r\nexport class CameraPhoto {\r\n  constructor (videoElement) {\r\n    this.videoElement = videoElement;\r\n    this.stream = null;\r\n    this.numberOfMaxResolutionTry = 0;\r\n    this.settings = null;\r\n    this.cameras = [];\r\n\r\n    // Set the right object depending on the browser.\r\n    this.windowURL = MediaServices.getWindowURL();\r\n    this.mediaDevices = MediaServices.getNavigatorMediaDevices();\r\n  }\r\n\r\n  _getStreamDevice (idealCameraDevice, idealResolution) {\r\n    return new Promise((resolve, reject) => {\r\n      let constraints = MediaServices.getIdealConstraints(idealCameraDevice, idealResolution);\r\n\r\n      this.mediaDevices.getUserMedia(constraints)\r\n        .then((stream) => {\r\n          this._gotStream(stream);\r\n          resolve(stream);\r\n        })\r\n        .catch((error) => {\r\n          reject(error);\r\n        });\r\n    });\r\n  }\r\n\r\n  _getStreamDeviceMaxResolution (idealCameraDevice) {\r\n    let constraints = MediaServices.getMaxResolutionConstraints(idealCameraDevice, this.numberOfMaxResolutionTry);\r\n\r\n    // all the trying is done...\r\n    if (constraints == null) {\r\n      let idealResolution = {};\r\n      return this._getStreamDevice(idealCameraDevice, idealResolution);\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.mediaDevices.getUserMedia(constraints)\r\n        .then((stream) => {\r\n          this._gotStream(stream);\r\n          resolve(stream);\r\n        })\r\n        .catch((error) => {\r\n          setTimeout(() => {\r\n            this.numberOfMaxResolutionTry += 1;\r\n            this._getStreamDeviceMaxResolution(idealCameraDevice)\r\n              .catch(() => {\r\n                reject(error);\r\n              });\r\n          }, 20);\r\n        });\r\n    });\r\n  }\r\n\r\n  _setVideoSrc (stream) {\r\n    if ('srcObject' in this.videoElement) {\r\n      this.videoElement.srcObject = stream;\r\n    } else {\r\n      // using URL.createObjectURL() as fallback for old browsers\r\n      let videoSrc = this.windowURL.createObjectURL(stream);\r\n      this.videoElement.src = videoSrc;\r\n    }\r\n  }\r\n\r\n  _setSettings (stream) {\r\n    // default setting is null\r\n    this.settings = null;\r\n    const tracks = (stream && stream.getTracks)\r\n      ? stream.getTracks()\r\n      : [];\r\n\r\n    if (tracks.length > 0 && tracks[0].getSettings) {\r\n      this.settings = tracks[0].getSettings();\r\n    }\r\n  }\r\n\r\n  _enumerateCamerasPromise () {\r\n    return new Promise((resolve, reject) => {\r\n      // only make shure the camera is sarted\r\n\r\n      let cameras = [];\r\n      this.mediaDevices.enumerateDevices()\r\n        .then(function (devices) {\r\n          devices.forEach(function (device) {\r\n            if (device.kind === 'videoinput' && device.deviceId) {\r\n              cameras.push(device);\r\n            }\r\n          });\r\n          resolve(cameras);\r\n        })\r\n        .catch(function (err) {\r\n          reject(err);\r\n        });\r\n    });\r\n  }\r\n\r\n  _gotStream (stream) {\r\n    this.stream = stream;\r\n    this._setSettings(stream);\r\n    this._setVideoSrc(stream);\r\n  }\r\n\r\n  getCameraSettings () {\r\n    return this.settings;\r\n  }\r\n\r\n  enumerateCameras () {\r\n    // If the camera is already started, return only the promise.\r\n    if (this.stream) {\r\n      return this._enumerateCamerasPromise();\r\n    }\r\n\r\n    // We don't know if the camera is granted so we need to start\r\n    // and stop the camera and then return the promise.\r\n    return this.stopCamera()\r\n      .then(() => { })\r\n      .catch(() => { })\r\n      .then(() => {\r\n        const constraints = { video: true };\r\n        return this.mediaDevices.getUserMedia(constraints)\r\n          .then((stream) => {\r\n            // Wait 20 ms before stop the camera.\r\n            setTimeout(() => {\r\n              stream.getTracks().forEach(function (track) {\r\n                track.stop();\r\n              });\r\n            }, 20);\r\n          })\r\n          .then(() => { })\r\n          .catch(() => { })\r\n          .then(() => {\r\n            return this._enumerateCamerasPromise();\r\n          });\r\n      });\r\n  }\r\n\r\n  startCamera (idealCameraDevice, idealResolution) {\r\n    // stop the stream before playing it.\r\n    return this.stopCamera()\r\n      .then(() => { })\r\n      .catch(() => { })\r\n      // Always called (when the promise is done)\r\n      .then(() => {\r\n        return this._getStreamDevice(idealCameraDevice, idealResolution);\r\n      });\r\n  }\r\n\r\n  startCameraMaxResolution (idealCameraDevice = '') {\r\n    this.numberOfMaxResolutionTry = 0;\r\n    // stop the stream before playing it.\r\n    return this.stopCamera()\r\n      .then(() => { })\r\n      .catch(() => { })\r\n      // Always called (when the promise is done)\r\n      .then(() => {\r\n        return this._getStreamDeviceMaxResolution(idealCameraDevice);\r\n      });\r\n  }\r\n\r\n  getDataUri (userConfig) {\r\n    let config = {\r\n      sizeFactor: userConfig.sizeFactor === undefined\r\n        ? DEFAULT_SIZE_FACTOR\r\n        : userConfig.sizeFactor,\r\n      imageType: userConfig.imageType === undefined\r\n        ? DEFAULT_IMAGE_TYPE\r\n        : userConfig.imageType,\r\n      imageCompression: userConfig.imageCompression === undefined\r\n        ? DEFAULT_IMAGE_COMPRESSION\r\n        : userConfig.imageCompression,\r\n      isImageMirror: userConfig.isImageMirror === undefined\r\n        ? DEFAULT_IMAGE_MIRROR\r\n        : userConfig.isImageMirror\r\n    };\r\n\r\n    let dataUri = MediaServices.getDataUri(this.videoElement, config);\r\n    return dataUri;\r\n  }\r\n\r\n  stopCamera () {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.stream) {\r\n        this.stream.getTracks().forEach(function (track) {\r\n          track.stop();\r\n        });\r\n        this.videoElement.src = '';\r\n        this.stream = null;\r\n        this._setSettings(null);\r\n        resolve();\r\n      }\r\n      reject(Error('no stream to stop!'));\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/CameraPhoto/CameraPhoto.js","import { getImageSize, getDataUri, hasConstraints, getIsIOS } from './helper';\r\n\r\nimport {\r\n  SUPPORTED_FACING_MODES,\r\n  FACING_MODES,\r\n  IMAGE_TYPES,\r\n  NO_CONSTRAINTS\r\n} from './constants';\r\n\r\nexport class MediaServices {\r\n  static getDataUri (videoElement, config) {\r\n    let { sizeFactor, imageType, imageCompression, isImageMirror } = config;\r\n\r\n    let { videoWidth, videoHeight } = videoElement;\r\n    let { imageWidth, imageHeight } = getImageSize(videoWidth, videoHeight, sizeFactor);\r\n\r\n    // Build the canvas size et draw the image to context from videoElement\r\n    let canvas = document.createElement('canvas');\r\n    canvas.width = imageWidth;\r\n    canvas.height = imageHeight;\r\n    let context = canvas.getContext('2d');\r\n\r\n    // Flip horizontally (as css transform: rotateY(180deg))\r\n    if (isImageMirror) {\r\n      context.setTransform(-1, 0, 0, 1, canvas.width, 0);\r\n    }\r\n\r\n    context.drawImage(videoElement, 0, 0, imageWidth, imageHeight);\r\n\r\n    // Get dataUri from canvas\r\n    let dataUri = getDataUri(canvas, imageType, imageCompression);\r\n    return dataUri;\r\n  }\r\n\r\n  static getWindowURL () {\r\n    let windowURL =\r\n      window.URL || window.webkitURL || window.mozURL || window.msURL;\r\n    return windowURL;\r\n  }\r\n\r\n  /*\r\n  Inspiration : https://github.com/jhuckaby/webcamjs/blob/master/webcam.js\r\n  */\r\n  static getNavigatorMediaDevices () {\r\n    let NMDevice = null;\r\n    let isNewAPI = !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);\r\n    let isOldAPI = !!(navigator.mozGetUserMedia || navigator.webkitGetUserMedia);\r\n\r\n    if (isNewAPI) {\r\n      NMDevice = navigator.mediaDevices;\r\n    } else if (isOldAPI) {\r\n      let NMDeviceOld = navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\r\n      // Setup getUserMedia, with polyfill for older browsers\r\n      // Adapted from: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\r\n\r\n      let polyfillGetUserMedia = {\r\n        getUserMedia: function (constraint) {\r\n          return new Promise(function (resolve, reject) {\r\n            NMDeviceOld.call(navigator, constraint, resolve, reject);\r\n          });\r\n        }\r\n      };\r\n\r\n      // Overwrite getUserMedia() with the polyfill\r\n      NMDevice = Object.assign(NMDeviceOld, polyfillGetUserMedia);\r\n    }\r\n\r\n    // If is no navigator.mediaDevices || navigator.mozGetUserMedia || navigator.webkitGetUserMedia\r\n    // then is not supported so return null\r\n    return NMDevice;\r\n  }\r\n\r\n  // https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API/Constraints\r\n  static isSupportedFacingMode () {\r\n    // navigator.mediaDevices\r\n    return MediaServices.getNavigatorMediaDevices().getSupportedConstraints().facingMode;\r\n  }\r\n\r\n  static getIdealConstraints (idealCameraDevice, idealResolution) {\r\n    if (!hasConstraints(idealCameraDevice, idealResolution)) {\r\n      return NO_CONSTRAINTS;\r\n    }\r\n\r\n    const supConstraints = MediaServices.getNavigatorMediaDevices().getSupportedConstraints();\r\n    if (!supConstraints.width || !supConstraints.height) {\r\n      console.error(\r\n        'Constraint width or height not supported! fallback to default resolution'\r\n      );\r\n      return NO_CONSTRAINTS;\r\n    }\r\n\r\n    let facingMode;\r\n    let deviceId;\r\n\r\n    if (idealCameraDevice) {\r\n      const isFacingMode = SUPPORTED_FACING_MODES.includes(idealCameraDevice);\r\n      if (isFacingMode) {\r\n        facingMode = idealCameraDevice;\r\n      } else {\r\n        deviceId = { exact: idealCameraDevice };\r\n      }\r\n    }\r\n\r\n    const width = idealResolution && idealResolution.width;\r\n    const height = idealResolution && idealResolution.height;\r\n\r\n    return {\r\n      audio: false,\r\n      video: {\r\n        facingMode,\r\n        deviceId,\r\n        width,\r\n        height\r\n      }\r\n    };\r\n  }\r\n\r\n  static getMaxResolutionConstraints (idealCameraDevice = '', numberOfMaxResolutionTry) {\r\n    console.warn('getMaxResolutionConstraints() numberOfMaxResolutionTry:', numberOfMaxResolutionTry);\r\n\r\n    const VIDEO_ADVANCED_CONSTRANTS = [\r\n      { width: { min: 640 } },\r\n      { width: { min: 800 } },\r\n      { width: { min: 900 } },\r\n      { width: { min: 1024 } },\r\n      { width: { min: 1080 } },\r\n      { width: { min: 1280 } },\r\n      { width: { min: 1920 } },\r\n      { width: { min: 2560 } },\r\n      { width: { min: 3840 } },\r\n      { width: { min: 4096 } },\r\n      { width: { min: 4640 } },\r\n      { width: { min: 5120 } },\r\n      { width: { min: 5760 } },\r\n      { width: { min: 6400 } },\r\n      { width: { min: 7680 } }\r\n    ];\r\n\r\n    let stdConstraints = MediaServices.getIdealConstraints(idealCameraDevice, {});\r\n\r\n    if (numberOfMaxResolutionTry === 0) {\r\n      if (getIsIOS()) {\r\n        console.warn('fallback to iOS constraints');\r\n        // inspiration : https://www.w3.org/TR/mediacapture-streams/#example-3\r\n        let iPhoneConstraints = MediaServices.getIdealConstraints(idealCameraDevice, {\r\n          width: { min: 640, ideal: 3840 },\r\n          height: { min: 480, ideal: 2160 }\r\n        });\r\n        return iPhoneConstraints;\r\n      }\r\n\r\n      stdConstraints.video.advanced = VIDEO_ADVANCED_CONSTRANTS;\r\n      return stdConstraints;\r\n    }\r\n\r\n    if (numberOfMaxResolutionTry < VIDEO_ADVANCED_CONSTRANTS.length) {\r\n      // Each number of try, we remove the last value of the array (the bigger minim width)\r\n      let advanced = VIDEO_ADVANCED_CONSTRANTS.slice(0, -numberOfMaxResolutionTry);\r\n      stdConstraints.video.advanced = advanced;\r\n      return stdConstraints;\r\n    }\r\n\r\n    // Fallback all the possibility has been tried. ie:.\r\n    // numberOfMaxResolutionTry >= VIDEO_ADVANCED_CONSTRANTS.length\r\n    return null;\r\n  }\r\n\r\n  static get FACING_MODES () {\r\n    return FACING_MODES;\r\n  }\r\n\r\n  static get IMAGE_TYPES () {\r\n    return IMAGE_TYPES;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/CameraPhoto/MediaServices/MediaServices.js","// camera constants\r\nconst USER = 'user';\r\nconst ENVIRONMENT = 'environment';\r\n\r\nexport const SUPPORTED_FACING_MODES = [USER, ENVIRONMENT];\r\n\r\nexport const FACING_MODES = {\r\n  'USER': USER,\r\n  'ENVIRONMENT': ENVIRONMENT\r\n};\r\n\r\n// Image constants\r\nconst PNG = 'png';\r\nconst JPG = 'jpg';\r\n\r\nexport const SUPPORTED_IMAGE_TYPES = [JPG, PNG];\r\n\r\nexport const IMAGE_TYPES = {\r\n  'PNG': PNG,\r\n  'JPG': JPG\r\n};\r\n\r\nexport const FORMAT_TYPES = {\r\n  [JPG]: 'image/jpeg',\r\n  [PNG]: 'image/png'\r\n};\r\n\r\nexport const NO_CONSTRAINTS = {\r\n  audio: false,\r\n  video: true\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/CameraPhoto/MediaServices/constants.js","import { SUPPORTED_IMAGE_TYPES, FORMAT_TYPES, IMAGE_TYPES } from './constants';\r\n\r\nfunction _validateImgParam (imageType, imageCompression) {\r\n  // validate the imageCompression\r\n  if (!(imageCompression >= 0 && imageCompression <= 1)) {\r\n    throw new Error(\r\n      imageCompression + ' is invalid imageCompression, choose between: [0, 1]'\r\n    );\r\n  }\r\n\r\n  // validate the imageType\r\n  if (!SUPPORTED_IMAGE_TYPES.includes(imageType)) {\r\n    throw new Error(\r\n      imageType +\r\n      ' is invalid imageType, choose between: ' +\r\n      SUPPORTED_IMAGE_TYPES.join(', ')\r\n    );\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction _getValidImgParam (imageType, imageCompression) {\r\n  let imgParam = {};\r\n  try {\r\n    _validateImgParam(imageType, imageCompression);\r\n    imgParam.imageType = imageType;\r\n    imgParam.imageCompression = imageCompression;\r\n  } catch (e) {\r\n    console.error(e);\r\n    console.error('default value of ' + IMAGE_TYPES.PNG + ' is used');\r\n\r\n    imgParam.imageType = IMAGE_TYPES.PNG;\r\n    imgParam.imageCompression = null;\r\n  }\r\n\r\n  return imgParam;\r\n}\r\n\r\nfunction _getStringWithPlatform () {\r\n  // platform will be obsolete and will return empty string\r\n  const platform = window.navigator.platform;\r\n  const userAgent = window.navigator.userAgent;\r\n\r\n  return platform || userAgent;\r\n}\r\n\r\nfunction _getHasTouchEvents () {\r\n  return 'ontouchend' in document;\r\n}\r\n\r\nexport function getImageSize (videoWidth, videoHeight, sizeFactor) {\r\n  // calc the imageWidth\r\n  let imageWidth = videoWidth * parseFloat(sizeFactor);\r\n  // calc the ratio\r\n  let ratio = videoWidth / imageWidth;\r\n  // calc the imageHeight\r\n  let imageHeight = videoHeight / ratio;\r\n\r\n  return {\r\n    imageWidth,\r\n    imageHeight\r\n  };\r\n}\r\n\r\nexport function getDataUri (canvas, imageType, imageCompression) {\r\n  const imgParam = _getValidImgParam(imageType, imageCompression);\r\n\r\n  if (imgParam.imageType === IMAGE_TYPES.JPG) {\r\n    if (!imageCompression) {\r\n      return canvas.toDataURL(FORMAT_TYPES[IMAGE_TYPES.JPG]);\r\n    }\r\n    return canvas.toDataURL(FORMAT_TYPES[IMAGE_TYPES.JPG], imageCompression);\r\n  }\r\n\r\n  return canvas.toDataURL(FORMAT_TYPES[imageType]);\r\n}\r\n\r\nexport function hasConstraints (idealCameraDevice, idealResolution) {\r\n  return idealCameraDevice || idealResolution;\r\n}\r\n\r\n// Inspiration: https://stackoverflow.com/questions/9038625/detect-if-device-is-ios\r\nexport function getIsIOS () {\r\n  const stringWithPlatform = _getStringWithPlatform();\r\n\r\n  if (/iPad|iPhone|iPod/.test(stringWithPlatform)) {\r\n    return true;\r\n  }\r\n\r\n  // The new iPad return MacIntel as platform and Macintosh as userAgent\r\n  // so the way to differentiate iPad vs mac is by checking if\r\n  // Touch Events exist on the document\r\n  const hasTouchEvents = _getHasTouchEvents();\r\n  if (/Mac/.test(stringWithPlatform) && hasTouchEvents) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n// TODO : return an object with all usefull info of the device for debugging purpose.\r\nexport function _getDebugPlatformInfo () {\r\n  return {\r\n    userAgent: window.navigator.userAgent,\r\n    platform: window.navigator.platform,\r\n    _getStringWithPlatform: _getStringWithPlatform(),\r\n    _getHasTouchEvents: _getHasTouchEvents(),\r\n    getIsIOS: getIsIOS()\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/CameraPhoto/MediaServices/helper.js","export { MediaServices } from './MediaServices';\r\nexport { _getDebugPlatformInfo } from './helper';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/CameraPhoto/MediaServices/index.js","export const DEFAULT_SIZE_FACTOR = 1;\r\nexport const DEFAULT_IMAGE_COMPRESSION = null;\r\nexport const DEFAULT_IMAGE_MIRROR = false;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/CameraPhoto/constants.js","import { MediaServices } from './MediaServices';\r\n\r\nexport { CameraPhoto } from './CameraPhoto';\r\nexport const FACING_MODES = MediaServices.FACING_MODES;\r\nexport const IMAGE_TYPES = MediaServices.IMAGE_TYPES;\r\n\r\n// For debugging only\r\nexport { _getDebugPlatformInfo } from './MediaServices';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/CameraPhoto/index.js","import { CameraPhoto } from './CameraPhoto';\r\n\r\nexport { FACING_MODES, IMAGE_TYPES, _getDebugPlatformInfo } from './CameraPhoto';\r\nexport * from './plugins';\r\nexport default CameraPhoto;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/index.js","import { IMAGE_TYPES } from '../CameraPhoto';\r\n\r\nfunction _dataURItoBlob (dataURI) {\r\n  let byteString = atob(dataURI.split(',')[1]);\r\n\r\n  // separate out the mime component\r\n  let mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n\r\n  let ab = new ArrayBuffer(byteString.length);\r\n  let ia = new Uint8Array(ab);\r\n  for (let i = 0; i < byteString.length; i++) {\r\n    ia[i] = byteString.charCodeAt(i);\r\n  }\r\n\r\n  let blob = new Blob([ab], { type: mimeString });\r\n  return blob;\r\n}\r\n\r\nfunction _padWithZeroNumber (number, width) {\r\n  number = number + '';\r\n  return number.length >= width\r\n    ? number\r\n    : new Array(width - number.length + 1).join('0') + number;\r\n}\r\n\r\nfunction _getFileExtention (blobType) {\r\n  // by default the extention is .png\r\n  let extention = IMAGE_TYPES.PNG;\r\n\r\n  if (blobType === 'image/jpeg') {\r\n    extention = IMAGE_TYPES.JPG;\r\n  }\r\n  return extention;\r\n}\r\n\r\nfunction _getFileName (prefixName, imageNumber, blobType) {\r\n  const photoNumber = _padWithZeroNumber(imageNumber, 4);\r\n  const extention = _getFileExtention(blobType);\r\n\r\n  return `${prefixName}-${photoNumber}.${extention}`;\r\n}\r\n\r\nfunction _downloadImageFileFomBlob (blob, prefixName, imageNumber) {\r\n  window.URL = window.webkitURL || window.URL;\r\n\r\n  let anchor = document.createElement('a');\r\n  anchor.download = _getFileName(prefixName, imageNumber, blob.type);\r\n  anchor.href = window.URL.createObjectURL(blob);\r\n  let mouseEvent = document.createEvent('MouseEvents');\r\n  mouseEvent.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\r\n  anchor.dispatchEvent(mouseEvent);\r\n}\r\n\r\nexport function downloadPhoto (dataUri, prefixName = 'photo', imageNumber = 0) {\r\n  let blob = _dataURItoBlob(dataUri);\r\n  _downloadImageFileFomBlob(blob, prefixName, imageNumber);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/plugins/downloadPhoto.js","export { downloadPhoto } from './downloadPhoto';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/plugins/index.js"],"sourceRoot":""}